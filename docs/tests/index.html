<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:26,&quot;tests&quot;:44,&quot;passes&quot;:44,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2018-08-22T09:58:29.773Z&quot;,&quot;end&quot;:&quot;2018-08-22T09:58:29.802Z&quot;,&quot;duration&quot;:29,&quot;testsRegistered&quot;:44,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;passPercentClass&quot;:&quot;success&quot;,&quot;pendingPercentClass&quot;:&quot;danger&quot;},&quot;suites&quot;:{&quot;uuid&quot;:&quot;9c1ac75b-bd29-4545-9103-47b8358e418b&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;25778d78-8060-43f9-a960-74c8bf7f8657&quot;,&quot;title&quot;:&quot;acl&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f41e8502-dd6a-4e7c-b422-56849032b410&quot;,&quot;title&quot;:&quot;from(roles)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to create an instance from a configured json&quot;,&quot;fullTitle&quot;:&quot;acl from(roles) should be able to create an instance from a configured json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:&quot;{\n  \&quot;title\&quot;: \&quot;acl.roles\&quot;,\n  \&quot;value\&quot;: {\n    \&quot;foo\&quot;: {\n      \&quot;users\&quot;: [\n        \&quot;foobar\&quot;,\n        \&quot;bazqux\&quot;\n      ],\n      \&quot;children\&quot;: [],\n      \&quot;domains\&quot;: {\n        \&quot;domain\&quot;: {\n          \&quot;res-1\&quot;: [\n            \&quot;perm-1-1\&quot;\n          ],\n          \&quot;res-2\&quot;: [\n            \&quot;perm-2-2\&quot;\n          ]\n        }\n      }\n    },\n    \&quot;bar\&quot;: {\n      \&quot;users\&quot;: [\n        \&quot;foobaz\&quot;\n      ],\n      \&quot;children\&quot;: [\n        \&quot;foo\&quot;,\n        \&quot;baz\&quot;\n      ],\n      \&quot;domains\&quot;: {}\n    },\n    \&quot;baz\&quot;: {\n      \&quot;users\&quot;: [],\n      \&quot;children\&quot;: [],\n      \&quot;domains\&quot;: {\n        \&quot;domain\&quot;: {\n          \&quot;res-0\&quot;: [],\n          \&quot;res-1\&quot;: [\n            \&quot;perm-1-3\&quot;\n          ]\n        }\n      }\n    }\n  }\n}&quot;,&quot;code&quot;:&quot;const acl = new Acl\nacl.addRoleUser(&#x27;foo&#x27;, &#x27;foobar&#x27;)\nacl.addRoleUser(&#x27;foo&#x27;, &#x27;bazqux&#x27;)\nacl.addRoleUser(&#x27;bar&#x27;, &#x27;foobaz&#x27;)\nacl.addRoleChild(&#x27;bar&#x27;, &#x27;foo&#x27;)\nacl.addRoleChild(&#x27;bar&#x27;, &#x27;baz&#x27;)\nacl.addRoleDomainResource(&#x27;baz&#x27;, &#x27;domain&#x27;, &#x27;res-0&#x27;)\nacl.addRoleDomainResourcePermission(&#x27;foo&#x27;, &#x27;domain&#x27;, &#x27;res-1&#x27;, &#x27;perm-1-1&#x27;)\nacl.addRoleDomainResourcePermission(&#x27;foo&#x27;, &#x27;domain&#x27;, &#x27;res-2&#x27;, &#x27;perm-2-1&#x27;)\nacl.addRoleDomainResourcePermission(&#x27;foo&#x27;, &#x27;domain&#x27;, &#x27;res-2&#x27;, &#x27;perm-2-2&#x27;)\nacl.addRoleDomainResourcePermission(&#x27;baz&#x27;, &#x27;domain&#x27;, &#x27;res-1&#x27;, &#x27;perm-1-1&#x27;)\nacl.addRoleDomainResourcePermission(&#x27;baz&#x27;, &#x27;domain&#x27;, &#x27;res-1&#x27;, &#x27;perm-1-2&#x27;)\nacl.addRoleDomainResourcePermission(&#x27;baz&#x27;, &#x27;domain&#x27;, &#x27;res-1&#x27;, &#x27;perm-1-3&#x27;)\ncontext(this, { title:&#x27;acl.roles&#x27;, value:acl.roles })\nexpect(Acl.from(acl.roles).roles).to.deep.equal(acl.roles)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;62fed091-34f7-4ad4-8fff-f77999835d4e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an error if there is an invalid key in the arg&quot;,&quot;fullTitle&quot;:&quot;acl from(roles) should throw an error if there is an invalid key in the arg&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(Acl.from.bind(null, { foo:{ bar:&#x27;baz&#x27; } })).to.throw(Error)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e4174787-5a0f-4a5e-abfc-0aa464a45820&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;62fed091-34f7-4ad4-8fff-f77999835d4e&quot;,&quot;e4174787-5a0f-4a5e-abfc-0aa464a45820&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b5460a77-c52f-4fd0-ae1d-eba3317ef0f2&quot;,&quot;title&quot;:&quot;hasRole(role)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not find a role not previously added&quot;,&quot;fullTitle&quot;:&quot;acl hasRole(role) should not find a role not previously added&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;role&#x27;\nexpect(acl.hasRole(role)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8bf99e48-fbe4-4d3d-92f0-e4c0c692fb76&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be able to find an existing role&quot;,&quot;fullTitle&quot;:&quot;acl hasRole(role) should be able to find an existing role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;role&#x27;\nexpect(acl.hasRole(role)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRole(role)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b0911250-6097-47b1-8d2c-07990b4f260f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8bf99e48-fbe4-4d3d-92f0-e4c0c692fb76&quot;,&quot;b0911250-6097-47b1-8d2c-07990b4f260f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3c160896-0797-457a-9d2d-0adc53ad8f8a&quot;,&quot;title&quot;:&quot;addRole(role)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to add a role&quot;,&quot;fullTitle&quot;:&quot;acl addRole(role) should be able to add a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;role&#x27;\nexpect(acl.hasRole(role)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRole(role)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d337e04e-6eb4-4b14-b0d7-5217b77b819a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;adding the same role multiple times wont reset it&quot;,&quot;fullTitle&quot;:&quot;acl addRole(role) adding the same role multiple times wont reset it&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nuser  = &#x27;bar&#x27;\nacl.addRole(role)\nacl.addRoleUser(role, user)\nacl.addRole(role)\nexpect(acl.hasRoleUser(role, user)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4a6a0fa6-d6f5-4532-a938-6063cb5ebda8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d337e04e-6eb4-4b14-b0d7-5217b77b819a&quot;,&quot;4a6a0fa6-d6f5-4532-a938-6063cb5ebda8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;26e29cdb-15f8-4f59-b8b5-5ec4a0fef169&quot;,&quot;title&quot;:&quot;removeRole(role)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;removing a non existing role wont throw&quot;,&quot;fullTitle&quot;:&quot;acl removeRole(role) removing a non existing role wont throw&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;\nexpect(acl.removeRole.bind(acl, role)).to.not.throw()&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3fff713b-52bd-406f-a124-170af623dce7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removing an existing role to be removed&quot;,&quot;fullTitle&quot;:&quot;acl removeRole(role) removing an existing role to be removed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;\nacl.addRole(role)\nexpect(acl.hasRole(role)).to.be.equal(true)\nacl.removeRole(role)\nexpect(acl.hasRole(role)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f984c7e1-920b-4f5f-9498-2fc1b163c19c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3fff713b-52bd-406f-a124-170af623dce7&quot;,&quot;f984c7e1-920b-4f5f-9498-2fc1b163c19c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eaecfb8e-97b7-47ed-8bfc-ec16e1fbaef8&quot;,&quot;title&quot;:&quot;hasRoleChild(role, child)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return false if child is not child of role&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleChild(role, child) should return false if child is not child of role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nchild = &#x27;bar&#x27;\nexpect(acl.hasRoleChild(role, child)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRoleChild(role, child)).to.be.equal(false)\nacl.addRole(child)\nexpect(acl.hasRoleChild(role, child)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6913037c-95fe-4e0c-aa90-61cd4242d426&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be able to find a child of a role&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleChild(role, child) should be able to find a child of a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nchild = &#x27;bar&#x27;\nacl.addRoleChild(role, child)\nexpect(acl.hasRoleChild(role, child)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;540693e4-455a-4042-9370-9c10bd2219d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6913037c-95fe-4e0c-aa90-61cd4242d426&quot;,&quot;540693e4-455a-4042-9370-9c10bd2219d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f11833f5-c585-4068-98dd-b1937929f1b4&quot;,&quot;title&quot;:&quot;hasRoleChildRecursively(role, child)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return false if child does not derive from role&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleChildRecursively(role, child) should return false if child does not derive from role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl           = new Acl,\nrole          = &#x27;foo&#x27;,\nchild         = &#x27;bar&#x27;,\nchildOfChild  = &#x27;baz&#x27;\nexpect(acl.hasRoleChildRecursively(role, childOfChild)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRoleChildRecursively(role, childOfChild)).to.be.equal(false)\nacl.addRole(child)\nexpect(acl.hasRoleChildRecursively(role, childOfChild)).to.be.equal(false)\nacl.addRole(childOfChild)\nexpect(acl.hasRoleChildRecursively(role, childOfChild)).to.be.equal(false)\nacl.addRoleChild(role, child)\nexpect(acl.hasRoleChildRecursively(role, childOfChild)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a26f5d6e-774a-4ef3-8e4d-9bb82677900c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true if child derives from role&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleChildRecursively(role, child) should return true if child derives from role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl           = new Acl,\nrole          = &#x27;foo&#x27;,\nchild         = &#x27;bar&#x27;,\nchildOfChild  = &#x27;baz&#x27;\nacl.addRoleChild(role, child)\nacl.addRoleChild(child, childOfChild)\nexpect(acl.hasRoleChildRecursively(role, childOfChild)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6afb70d8-beb5-41be-88f9-a3a19fa7c7b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a26f5d6e-774a-4ef3-8e4d-9bb82677900c&quot;,&quot;6afb70d8-beb5-41be-88f9-a3a19fa7c7b4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;90978e78-2431-4169-b92e-f07a04568521&quot;,&quot;title&quot;:&quot;addRoleChild(role, child)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to add a child to a role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleChild(role, child) should be able to add a child to a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nchild = &#x27;bar&#x27;\nacl.addRoleChild(role, child)\nexpect(acl.hasRole(role)).to.be.equal(true)\nexpect(acl.hasRole(child)).to.be.equal(true)\nexpect(acl.hasRoleChild(role, child)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;884e5f6b-cbec-440a-9984-a6c0072ad6c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;884e5f6b-cbec-440a-9984-a6c0072ad6c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f35f48df-2b57-4dd0-8294-b0b39a9194f5&quot;,&quot;title&quot;:&quot;removeRoleChild(role, child)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to remove a child from a role&quot;,&quot;fullTitle&quot;:&quot;acl removeRoleChild(role, child) should be able to remove a child from a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nchild = &#x27;bar&#x27;\nacl.addRoleChild(role, child)\nexpect(acl.hasRoleChild(role, child)).to.be.equal(true)\nacl.removeRoleChild(role, child)\nexpect(acl.hasRoleChild(role, child)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6a10916a-6585-49d1-b438-848e9ac68a8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6a10916a-6585-49d1-b438-848e9ac68a8d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2e5de382-d113-44aa-bc26-1fd5e43ffe2f&quot;,&quot;title&quot;:&quot;hasRoleUser(role, user)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true only if role has user&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleUser(role, user) should return true only if role has user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl  = new Acl,\nrole = &#x27;foo&#x27;,\nuser = &#x27;bar&#x27;\nexpect(acl.hasRoleUser(role, user)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRoleUser(role, user)).to.be.equal(false)\nacl.addRoleUser(role, user)\nexpect(acl.hasRoleUser(role, user)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;1714d6a7-85a3-45a7-a237-192a055c0913&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1714d6a7-85a3-45a7-a237-192a055c0913&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ffdd64b9-8961-4b90-ba7c-058f5d5f835a&quot;,&quot;title&quot;:&quot;addRoleUser(role user)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;adding a user to a role also creates the role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleUser(role user) adding a user to a role also creates the role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl  = new Acl,\nrole = &#x27;foo&#x27;,\nuser = &#x27;bar&#x27;\nexpect(acl.hasRole(role)).to.be.equal(false)\nacl.addRoleUser(role, user)\nexpect(acl.hasRole(role)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f5a8a288-6849-429c-a2e5-8b9744430fbd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be able to add a user to a role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleUser(role user) should be able to add a user to a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl  = new Acl,\nrole = &#x27;foo&#x27;,\nuser = &#x27;bar&#x27;\nexpect(acl.hasRoleUser(role, user)).to.be.equal(false)\nacl.addRoleUser(role, user)\nexpect(acl.hasRoleUser(role, user)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ca15da10-f2d9-4499-b9a3-1e62915eba6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5a8a288-6849-429c-a2e5-8b9744430fbd&quot;,&quot;ca15da10-f2d9-4499-b9a3-1e62915eba6e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e9fde413-4f5b-4fa2-bd38-2c1d1d35f044&quot;,&quot;title&quot;:&quot;removeRoleUser(role, user)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to remove a user from a role&quot;,&quot;fullTitle&quot;:&quot;acl removeRoleUser(role, user) should be able to remove a user from a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl  = new Acl,\nrole = &#x27;foo&#x27;,\nuser = &#x27;bar&#x27;\nexpect(acl.hasRoleUser(role, user)).to.be.equal(false)\nacl.addRoleUser(role, user)\nexpect(acl.hasRoleUser(role, user)).to.be.equal(true)\nacl.removeRoleUser(role, user)\nexpect(acl.hasRoleUser(role, user)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7d5e234a-1412-4bc8-a1f7-8b2f7bb9d470&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7d5e234a-1412-4bc8-a1f7-8b2f7bb9d470&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cc18642f-3ca9-4fba-99f9-66ecd32f3b28&quot;,&quot;title&quot;:&quot;removeUser(user)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to remove a user from all roles&quot;,&quot;fullTitle&quot;:&quot;acl removeUser(user) should be able to remove a user from all roles&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole1 = &#x27;foo&#x27;,\nrole2 = &#x27;bar&#x27;,\nrole3 = &#x27;baz&#x27;,\nuser  = &#x27;qux&#x27;\nacl.addRoleUser(role1, user)\nacl.addRoleUser(role2, user)\nexpect(acl.hasRoleUser(role1, user)).to.be.equal(true)\nexpect(acl.hasRoleUser(role2, user)).to.be.equal(true)\nexpect(acl.hasRoleUser(role3, user)).to.be.equal(false)\nacl.removeUser(user)\nexpect(acl.hasRoleUser(role1, user)).to.be.equal(false)\nexpect(acl.hasRoleUser(role2, user)).to.be.equal(false)\nexpect(acl.hasRoleUser(role3, user)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3784472f-8bc4-49af-af71-efca054eb853&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3784472f-8bc4-49af-af71-efca054eb853&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;713a4861-ce4f-4353-909b-df414b9269b5&quot;,&quot;title&quot;:&quot;hasRoleDomainResource(role, domain, resource)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true only if the role has the resource&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleDomainResource(role, domain, resource) should return true only if the role has the resource&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nrole      = &#x27;foo&#x27;,\nresource  = &#x27;bar&#x27;\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, resource)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, resource)).to.be.equal(false)\nacl.addRoleDomainResource(role, &#x27;domain&#x27;, resource)\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, resource)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;38b240a5-d0b8-477a-af07-d56a1746a30a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;38b240a5-d0b8-477a-af07-d56a1746a30a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b74d3470-dbe6-483d-b951-36ac0ebe3c81&quot;,&quot;title&quot;:&quot;addRoleDomainResource(role, domain, resource)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to add a resource to a role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleDomainResource(role, domain, resource) should be able to add a resource to a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nrole      = &#x27;foo&#x27;,\nresource  = &#x27;bar&#x27;\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, resource)).to.be.equal(false)\nacl.addRoleDomainResource(role, &#x27;domain&#x27;, resource)\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, resource)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;69f0c513-c031-430b-8931-289827a95e72&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;69f0c513-c031-430b-8931-289827a95e72&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d0844f75-4acd-4ed8-b9a7-9632864eb121&quot;,&quot;title&quot;:&quot;removeRoleDomainResource(role, domain, resource)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to remove a resource from a role&quot;,&quot;fullTitle&quot;:&quot;acl removeRoleDomainResource(role, domain, resource) should be able to remove a resource from a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nrole      = &#x27;foo&#x27;,\ndomain    = &#x27;domain&#x27;,\nresource  = &#x27;bar&#x27;\nexpect(acl.hasRoleDomainResource(role, domain, resource)).to.be.equal(false)\nacl.addRoleDomainResource(role, domain, resource)\nexpect(acl.hasRoleDomainResource(role, domain, resource)).to.be.equal(true)\nacl.removeRoleDomainResource(role, domain, resource)\nexpect(acl.hasRoleDomainResource(role, domain, resource)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;5f734b37-0bb8-43f4-835a-dbf03e85d0d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removing a resource from a role should not remove the role&quot;,&quot;fullTitle&quot;:&quot;acl removeRoleDomainResource(role, domain, resource) removing a resource from a role should not remove the role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nrole      = &#x27;foo&#x27;,\nresource  = &#x27;bar&#x27;\nacl.addRoleDomainResource(role, &#x27;domain&#x27;, resource)\nacl.removeRoleDomainResource(role, &#x27;domain&#x27;, resource)\nexpect(acl.hasRole(role)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2d72d7f7-072d-408f-9cce-d20201542154&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5f734b37-0bb8-43f4-835a-dbf03e85d0d7&quot;,&quot;2d72d7f7-072d-408f-9cce-d20201542154&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3403e0eb-a427-4518-bcef-13daac7d996d&quot;,&quot;title&quot;:&quot;removeDomainResource(domain, resource)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to remove a resource from all roles&quot;,&quot;fullTitle&quot;:&quot;acl removeDomainResource(domain, resource) should be able to remove a resource from all roles&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nrole1     = &#x27;foo&#x27;,\nrole2     = &#x27;bar&#x27;,\nrole3     = &#x27;baz&#x27;,\nresource  = &#x27;qux&#x27;\nacl.addRole(role1)\nacl.addRoleDomainResource(role2, &#x27;domain&#x27;, resource)\nacl.addRoleDomainResource(role3, &#x27;domain&#x27;, resource)\nexpect(acl.hasRoleDomainResource(role1, &#x27;domain&#x27;, resource)).to.be.equal(false)\nexpect(acl.hasRoleDomainResource(role2, &#x27;domain&#x27;, resource)).to.be.equal(true)\nexpect(acl.hasRoleDomainResource(role3, &#x27;domain&#x27;, resource)).to.be.equal(true)\nacl.removeDomainResource(&#x27;domain&#x27;, resource)\nexpect(acl.hasRoleDomainResource(role1, &#x27;domain&#x27;, resource)).to.be.equal(false)\nexpect(acl.hasRoleDomainResource(role2, &#x27;domain&#x27;, resource)).to.be.equal(false)\nexpect(acl.hasRoleDomainResource(role3, &#x27;domain&#x27;, resource)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;37744708-baec-4510-8856-56259d9e3745&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;37744708-baec-4510-8856-56259d9e3745&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2ed196db-e291-423f-9dde-615ad3774290&quot;,&quot;title&quot;:&quot;hasRoleDomainResourcePermission(role, domain, resource, permission)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true only if the role has the permission&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleDomainResourcePermission(role, domain, resource, permission) should return true only if the role has the permission&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nacl.addRoleDomainResource(role, &#x27;domain&#x27;, res)\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nacl.addRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;379fcb4a-e10e-477a-b169-224c192880b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;379fcb4a-e10e-477a-b169-224c192880b2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;32bbac25-78ce-4062-8b6b-18d85872b760&quot;,&quot;title&quot;:&quot;addRoleDomainResourcePermission(role, domain, resource, permission)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to add a permission to a role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleDomainResourcePermission(role, domain, resource, permission) should be able to add a permission to a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nacl.addRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8f2b2d57-c0db-456f-ab15-6221590a1e66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should add a resource to the role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleDomainResourcePermission(role, domain, resource, permission) should add a resource to the role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, res)).to.be.equal(false)\nacl.addRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, res)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;27c0c0cd-3aa1-4014-9a9a-374578e29bbf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should add a role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleDomainResourcePermission(role, domain, resource, permission) should add a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nexpect(acl.hasRole(role)).to.be.equal(false)\nacl.addRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRole(role)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e0b3d11e-8cd9-4c7b-abba-153743e8e580&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8f2b2d57-c0db-456f-ab15-6221590a1e66&quot;,&quot;27c0c0cd-3aa1-4014-9a9a-374578e29bbf&quot;,&quot;e0b3d11e-8cd9-4c7b-abba-153743e8e580&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0dffb910-8801-4f9a-b1e3-f3febf62e087&quot;,&quot;title&quot;:&quot;removeRoleDomainResourcePermission(role, domain, resource, permission)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove a permission from a role resource&quot;,&quot;fullTitle&quot;:&quot;acl removeRoleDomainResourcePermission(role, domain, resource, permission) should remove a permission from a role resource&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nacl.addRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(true)\nacl.removeRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2e9dcb79-78ea-43fa-ae2e-3ff813ad7c99&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e9dcb79-78ea-43fa-ae2e-3ff813ad7c99&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7924a6f1-ea7c-4efd-9675-db7250d7e031&quot;,&quot;title&quot;:&quot;removeDomainResourcePermission(domain, resource, permission)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove a permission from a resource on all roles&quot;,&quot;fullTitle&quot;:&quot;acl removeDomainResourcePermission(domain, resource, permission) should remove a permission from a resource on all roles&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole1 = &#x27;foo1&#x27;,\nrole2 = &#x27;foo2&#x27;,\nrole3 = &#x27;foo3&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nacl.addRoleDomainResource(role1, &#x27;domain&#x27;, res)\nacl.addRoleDomainResourcePermission(role2, &#x27;domain&#x27;, res, per)\nacl.addRoleDomainResourcePermission(role3, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResourcePermission(role1, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nexpect(acl.hasRoleDomainResourcePermission(role2, &#x27;domain&#x27;, res, per)).to.be.equal(true)\nexpect(acl.hasRoleDomainResourcePermission(role3, &#x27;domain&#x27;, res, per)).to.be.equal(true)\nacl.removeDomainResourcePermission(&#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResourcePermission(role1, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nexpect(acl.hasRoleDomainResourcePermission(role2, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nexpect(acl.hasRoleDomainResourcePermission(role3, &#x27;domain&#x27;, res, per)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;0efe6cd7-1397-4535-9ce0-3f4bb55321c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not remove the role and resouce&quot;,&quot;fullTitle&quot;:&quot;acl removeDomainResourcePermission(domain, resource, permission) should not remove the role and resouce&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole1 = &#x27;foo1&#x27;,\nrole2 = &#x27;foo2&#x27;,\nrole3 = &#x27;foo3&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nacl.addRoleDomainResource(role1, &#x27;domain&#x27;, res)\nacl.addRoleDomainResourcePermission(role2, &#x27;domain&#x27;, res, per)\nacl.addRoleDomainResourcePermission(role3, &#x27;domain&#x27;, res, per)\nacl.removeDomainResourcePermission(res, &#x27;domain&#x27;, per)\nexpect(acl.hasRoleDomainResource(role1, &#x27;domain&#x27;, res, per)).to.be.equal(true)\nexpect(acl.hasRoleDomainResource(role2, &#x27;domain&#x27;, res, per)).to.be.equal(true)\nexpect(acl.hasRoleDomainResource(role3, &#x27;domain&#x27;, res, per)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;8d41b347-f587-4aa7-906a-1d75ecd22587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0efe6cd7-1397-4535-9ce0-3f4bb55321c5&quot;,&quot;8d41b347-f587-4aa7-906a-1d75ecd22587&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7ede5465-32dc-4ce0-81e4-c30c24b27c23&quot;,&quot;title&quot;:&quot;getUserRoles(user)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of all the roles a user have&quot;,&quot;fullTitle&quot;:&quot;acl getUserRoles(user) should return a list of all the roles a user have&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nuser  = &#x27;foobar&#x27;,\nrole1 = &#x27;foo&#x27;,\nrole2 = &#x27;bar&#x27;,\nrole3 = &#x27;baz&#x27;,\nrole4 = &#x27;qux&#x27;\nacl.addRoleUser(role1, user)\nacl.addRoleUser(role2, user)\nacl.addRoleChild(role1, role3)\nacl.addRoleChild(role2, role4)\nexpect(acl.getUserRoles(user)).to.have.members([role1, role2])&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2546f737-45b2-4360-81c8-1e88d1900ef6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2546f737-45b2-4360-81c8-1e88d1900ef6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3f2c31dd-a3ec-45ec-bfc4-06ca11e51ed7&quot;,&quot;title&quot;:&quot;getUserRolesRecursive(user)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of roles and the derieved roles a user have&quot;,&quot;fullTitle&quot;:&quot;acl getUserRolesRecursive(user) should return a list of roles and the derieved roles a user have&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nuser1     = &#x27;foobar1&#x27;,\nuser2     = &#x27;foobar2&#x27;,\nrole1     = &#x27;foo&#x27;,\nrole2     = &#x27;bar&#x27;,\nrole3     = &#x27;baz&#x27;,\nrole4     = &#x27;qux&#x27;,\nexpected  = [role1, role2, role3]\nacl.addRoleUser(role1, user1)\nacl.addRoleUser(role2, user1)\nacl.addRoleChild(role1, role3)\nacl.addRole(role4)\nexpect(acl.getUserRolesRecursively(user1)).to.have.members(expected)\nacl.addRoleUser(role4, user2)\nexpect(acl.getUserRolesRecursively(user1)).to.have.members(expected)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;76433e36-80da-47d9-8b08-8988df62cbe7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76433e36-80da-47d9-8b08-8988df62cbe7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9df431c7-8999-4cb1-91d8-ad2e34beff48&quot;,&quot;title&quot;:&quot;getRolesRecursively(role)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of roles derieved of the root role&quot;,&quot;fullTitle&quot;:&quot;acl getRolesRecursively(role) should return a list of roles derieved of the root role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nrole1     = &#x27;foo&#x27;,\nrole2     = &#x27;bar&#x27;,\nrole3     = &#x27;baz&#x27;,\nrole4     = &#x27;qux&#x27;,\nexpected  = [role1, role3]\nacl.addRole(role1)\nacl.addRole(role2)\nacl.addRoleChild(role1, role3)\nexpect(acl.getRolesRecursively(role1)).to.have.members(expected)\nacl.addRole(role4)\nexpect(acl.getRolesRecursively(role1)).to.have.members(expected)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ee169774-b5e5-415b-a6c9-01230369bdb6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee169774-b5e5-415b-a6c9-01230369bdb6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;28df50e8-7da1-4883-a425-0421dad6a7d0&quot;,&quot;title&quot;:&quot;isUserAuthorized(user, domain, resource, permission)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should only allow a valid permission&quot;,&quot;fullTitle&quot;:&quot;acl isUserAuthorized(user, domain, resource, permission) should only allow a valid permission&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nuser        = &#x27;foo&#x27;,\nrole        = &#x27;bar&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource    = &#x27;baz&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRoleUser(role, user)\nacl.addRoleDomainResourcePermission(role, domain, resource, permission)\nconst result = acl.isUserAuthorized(user, domain, resource, permission)\nexpect(result).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f68451c9-4a0f-4d19-9d28-7411edcde122&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow a valid permission through a role hierarchy&quot;,&quot;fullTitle&quot;:&quot;acl isUserAuthorized(user, domain, resource, permission) should allow a valid permission through a role hierarchy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nuser1       = &#x27;foo1&#x27;,\nuser2       = &#x27;foo2&#x27;,\nrole1       = &#x27;bar1&#x27;,\nrole2       = &#x27;bar2&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRoleUser(role1, user1)\nacl.addRoleUser(role2, user2)\nacl.addRoleDomainResourcePermission(role1, domain, resource1, permission)\nacl.addRoleDomainResourcePermission(role2, domain, resource2, permission)\nconst result1 = acl.isUserAuthorized(user1, domain, resource2, permission)\nexpect(result1).to.be.equal(false)\nacl.addRoleChild(role1, role2)\nconst result2 = acl.isUserAuthorized(user1, domain, resource2, permission)\nexpect(result2).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3838e7f3-696d-42b7-8b2a-7a54fb6bb981&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow an invalid permission&quot;,&quot;fullTitle&quot;:&quot;acl isUserAuthorized(user, domain, resource, permission) should not allow an invalid permission&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nuser1       = &#x27;foo1&#x27;,\nuser2       = &#x27;foo2&#x27;,\nrole1       = &#x27;bar1&#x27;,\nrole2       = &#x27;bar2&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRoleUser(role1, user1)\nacl.addRoleUser(role2, user2)\nacl.addRoleDomainResourcePermission(role1, domain, resource1, permission)\nacl.addRoleDomainResourcePermission(role2, domain, resource2, permission)\nconst result1 = acl.isUserAuthorized(user1, domain, resource1, permission)\nexpect(result1).to.be.equal(true)\nconst result2 = acl.isUserAuthorized(user1, domain, resource2, permission)\nexpect(result2).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;425a3997-1e32-44a1-a1b6-d98f8683333b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f68451c9-4a0f-4d19-9d28-7411edcde122&quot;,&quot;3838e7f3-696d-42b7-8b2a-7a54fb6bb981&quot;,&quot;425a3997-1e32-44a1-a1b6-d98f8683333b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;91895f5e-931e-4b1b-b2a1-a0b1e1c93b73&quot;,&quot;title&quot;:&quot;isRoleAuthorized(role, domain, resource, permission)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should only allow a valid permission&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) should only allow a valid permission&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole        = &#x27;bar&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource    = &#x27;baz&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRole(role)\nacl.addRoleDomainResourcePermission(role, domain, resource, permission)\nconst result = acl.isRoleAuthorized(role, domain, resource, permission)\nexpect(result).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dad8ee93-09c7-4b51-b523-0602482c563b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow a valid permission through a role hierarchy&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) should allow a valid permission through a role hierarchy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole1       = &#x27;bar1&#x27;,\nrole2       = &#x27;bar2&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRole(role1)\nacl.addRole(role2)\nacl.addRoleDomainResourcePermission(role1, domain, resource1, permission)\nacl.addRoleDomainResourcePermission(role2, domain, resource2, permission)\nconst result1 = acl.isRoleAuthorized(role1, domain, resource2, permission)\nexpect(result1).to.be.equal(false)\nacl.addRoleChild(role1, role2)\nconst result2 = acl.isRoleAuthorized(role1, domain, resource2, permission)\nexpect(result2).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6e267db9-582c-489b-a454-c56b6cf1a0a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow an invalid permission&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) should not allow an invalid permission&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole1       = &#x27;bar1&#x27;,\nrole2       = &#x27;bar2&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRole(role1)\nacl.addRole(role2)\nacl.addRoleDomainResourcePermission(role1, domain, resource1, permission)\nacl.addRoleDomainResourcePermission(role2, domain, resource2, permission)\nconst result1 = acl.isRoleAuthorized(role1, domain, resource1, permission)\nexpect(result1).to.be.equal(true)\nconst result2 = acl.isRoleAuthorized(role1, domain, resource2, permission)\nexpect(result2).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;11331e1c-4eb4-427c-9c7d-b664487283c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;* for resouce should allow access to all resources&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) * for resouce should allow access to all resources&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole1       = &#x27;bar1&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRole(role1)\nacl.addRoleDomainResourcePermission(role1, domain, &#x27;*&#x27;, permission)\nconst result1 = acl.isRoleAuthorized(role1, domain, resource1, permission)\nexpect(result1).to.be.equal(true)\nconst result2 = acl.isRoleAuthorized(role1, domain, resource2, permission)\nexpect(result2).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;9bf16ada-442c-456f-9269-879ba372d3e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;* for permission should allow access to all permissions&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) * for permission should allow access to all permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole1       = &#x27;bar1&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\npermission1 = &#x27;qux1&#x27;,\npermission2 = &#x27;qux2&#x27;\nacl.addRole(role1)\nacl.addRoleDomainResourcePermission(role1, domain, resource1, &#x27;*&#x27;)\nconst result1 = acl.isRoleAuthorized(role1, domain, resource1, permission1)\nexpect(result1).to.be.equal(true)\nconst result2 = acl.isRoleAuthorized(role1, domain, resource1, permission2)\nexpect(result2).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3a910126-60cd-4c45-a71d-cc1d13dde881&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;* for permission and resource should allow access to everything&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) * for permission and resource should allow access to everything&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole1       = &#x27;bar1&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission1 = &#x27;qux1&#x27;,\npermission2 = &#x27;qux2&#x27;\nacl.addRole(role1)\nacl.addRoleDomainResourcePermission(role1, domain, &#x27;*&#x27;, &#x27;*&#x27;)\nconst result1 = acl.isRoleAuthorized(role1, domain, resource1, permission1)\nexpect(result1).to.be.equal(true)\nconst result2 = acl.isRoleAuthorized(role1, domain, resource2, permission2)\nexpect(result2).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f0ef028b-c0e5-4cb2-b9d1-886d7e2ecaae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;undefined permission should allow access on a resource level&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) undefined permission should allow access on a resource level&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole1       = &#x27;bar1&#x27;,\nrole2       = &#x27;bar2&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission1 = &#x27;qux1&#x27;,\npermission2 = &#x27;qux2&#x27;\nacl.addRole(role1)\nacl.addRole(role2)\nacl.addRoleDomainResourcePermission(role1, domain, resource1, permission1)\nacl.addRoleDomainResourcePermission(role2, domain, resource2, permission2)\nconst result1 = acl.isRoleAuthorized(role1, domain, resource1)\nexpect(result1).to.be.equal(true)\nconst result2 = acl.isRoleAuthorized(role1, domain, resource2)\nexpect(result2).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;80e845d9-fbcf-4b5d-8c10-caa8a68f191d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dad8ee93-09c7-4b51-b523-0602482c563b&quot;,&quot;6e267db9-582c-489b-a454-c56b6cf1a0a8&quot;,&quot;11331e1c-4eb4-427c-9c7d-b664487283c8&quot;,&quot;9bf16ada-442c-456f-9269-879ba372d3e7&quot;,&quot;3a910126-60cd-4c45-a71d-cc1d13dde881&quot;,&quot;f0ef028b-c0e5-4cb2-b9d1-886d7e2ecaae&quot;,&quot;80e845d9-fbcf-4b5d-8c10-caa8a68f191d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},&quot;copyrightYear&quot;:2018}" data-config="{&quot;reportFilename&quot;:&quot;index&quot;,&quot;reportDir&quot;:&quot;docs/tests&quot;,&quot;reportTitle&quot;:&quot;js.acl&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;always&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;docs/tests/assets&quot;,&quot;jsonFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/docs/tests/index.json&quot;,&quot;htmlFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/docs/tests/index.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>