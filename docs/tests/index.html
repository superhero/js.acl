<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:26,&quot;tests&quot;:44,&quot;passes&quot;:44,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2018-08-28T09:16:07.589Z&quot;,&quot;end&quot;:&quot;2018-08-28T09:16:07.617Z&quot;,&quot;duration&quot;:28,&quot;testsRegistered&quot;:44,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false,&quot;passPercentClass&quot;:&quot;success&quot;,&quot;pendingPercentClass&quot;:&quot;danger&quot;},&quot;suites&quot;:{&quot;uuid&quot;:&quot;ec77f2bd-49dc-4630-9dd0-f36ceb6726ea&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7cc677f8-3380-47d4-8e35-7e10d5a02737&quot;,&quot;title&quot;:&quot;acl&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0688343f-1653-413a-b13e-9b584f439754&quot;,&quot;title&quot;:&quot;from(roles)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to create an instance from a configured json&quot;,&quot;fullTitle&quot;:&quot;acl from(roles) should be able to create an instance from a configured json&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:&quot;{\n  \&quot;title\&quot;: \&quot;acl.roles\&quot;,\n  \&quot;value\&quot;: {\n    \&quot;foo\&quot;: {\n      \&quot;users\&quot;: [\n        \&quot;foobar\&quot;,\n        \&quot;bazqux\&quot;\n      ],\n      \&quot;children\&quot;: [],\n      \&quot;domains\&quot;: {\n        \&quot;domain\&quot;: {\n          \&quot;res-1\&quot;: [\n            \&quot;perm-1-1\&quot;\n          ],\n          \&quot;res-2\&quot;: [\n            \&quot;perm-2-2\&quot;\n          ]\n        }\n      }\n    },\n    \&quot;bar\&quot;: {\n      \&quot;users\&quot;: [\n        \&quot;foobaz\&quot;\n      ],\n      \&quot;children\&quot;: [\n        \&quot;foo\&quot;,\n        \&quot;baz\&quot;\n      ],\n      \&quot;domains\&quot;: {}\n    },\n    \&quot;baz\&quot;: {\n      \&quot;users\&quot;: [],\n      \&quot;children\&quot;: [],\n      \&quot;domains\&quot;: {\n        \&quot;domain\&quot;: {\n          \&quot;res-0\&quot;: [],\n          \&quot;res-1\&quot;: [\n            \&quot;perm-1-3\&quot;\n          ]\n        }\n      }\n    }\n  }\n}&quot;,&quot;code&quot;:&quot;const acl = new Acl\nacl.addRoleUser(&#x27;foo&#x27;, &#x27;foobar&#x27;)\nacl.addRoleUser(&#x27;foo&#x27;, &#x27;bazqux&#x27;)\nacl.addRoleUser(&#x27;bar&#x27;, &#x27;foobaz&#x27;)\nacl.addRoleChild(&#x27;bar&#x27;, &#x27;foo&#x27;)\nacl.addRoleChild(&#x27;bar&#x27;, &#x27;baz&#x27;)\nacl.addRoleDomainResource(&#x27;baz&#x27;, &#x27;domain&#x27;, &#x27;res-0&#x27;)\nacl.addRoleDomainResourcePermission(&#x27;foo&#x27;, &#x27;domain&#x27;, &#x27;res-1&#x27;, &#x27;perm-1-1&#x27;)\nacl.addRoleDomainResourcePermission(&#x27;foo&#x27;, &#x27;domain&#x27;, &#x27;res-2&#x27;, &#x27;perm-2-1&#x27;)\nacl.addRoleDomainResourcePermission(&#x27;foo&#x27;, &#x27;domain&#x27;, &#x27;res-2&#x27;, &#x27;perm-2-2&#x27;)\nacl.addRoleDomainResourcePermission(&#x27;baz&#x27;, &#x27;domain&#x27;, &#x27;res-1&#x27;, &#x27;perm-1-1&#x27;)\nacl.addRoleDomainResourcePermission(&#x27;baz&#x27;, &#x27;domain&#x27;, &#x27;res-1&#x27;, &#x27;perm-1-2&#x27;)\nacl.addRoleDomainResourcePermission(&#x27;baz&#x27;, &#x27;domain&#x27;, &#x27;res-1&#x27;, &#x27;perm-1-3&#x27;)\ncontext(this, { title:&#x27;acl.roles&#x27;, value:acl.roles })\nexpect(Acl.from(acl.roles).roles).to.deep.equal(acl.roles)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;c541a247-66c0-46d9-8ab2-0d23bb0534c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should throw an error if there is an invalid key in the arg&quot;,&quot;fullTitle&quot;:&quot;acl from(roles) should throw an error if there is an invalid key in the arg&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;expect(Acl.from.bind(null, { foo:{ bar:&#x27;baz&#x27; } })).to.throw(Error)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e9521f89-b61e-41b2-abc5-1fddb5149330&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c541a247-66c0-46d9-8ab2-0d23bb0534c4&quot;,&quot;e9521f89-b61e-41b2-abc5-1fddb5149330&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7f105760-8713-4038-b6cb-29d33fb9dfbb&quot;,&quot;title&quot;:&quot;hasRole(role)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not find a role not previously added&quot;,&quot;fullTitle&quot;:&quot;acl hasRole(role) should not find a role not previously added&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;role&#x27;\nexpect(acl.hasRole(role)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;296efc73-2cb7-4436-b31d-478a2792d01b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be able to find an existing role&quot;,&quot;fullTitle&quot;:&quot;acl hasRole(role) should be able to find an existing role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;role&#x27;\nexpect(acl.hasRole(role)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRole(role)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d0ea0760-e321-41a4-9da2-cf55277de33e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;296efc73-2cb7-4436-b31d-478a2792d01b&quot;,&quot;d0ea0760-e321-41a4-9da2-cf55277de33e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;af4b7c35-92f3-4590-bfbc-4c58cff69400&quot;,&quot;title&quot;:&quot;addRole(role)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to add a role&quot;,&quot;fullTitle&quot;:&quot;acl addRole(role) should be able to add a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;role&#x27;\nexpect(acl.hasRole(role)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRole(role)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;89779115-21df-4c2d-9af4-014193b1deca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;adding the same role multiple times wont reset it&quot;,&quot;fullTitle&quot;:&quot;acl addRole(role) adding the same role multiple times wont reset it&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nuser  = &#x27;bar&#x27;\nacl.addRole(role)\nacl.addRoleUser(role, user)\nacl.addRole(role)\nexpect(acl.hasRoleUser(role, user)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d7fbc19d-5d19-41c9-8b9a-200f433dab20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;89779115-21df-4c2d-9af4-014193b1deca&quot;,&quot;d7fbc19d-5d19-41c9-8b9a-200f433dab20&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3fbd13d0-0ae7-4fa2-af48-d4804687c419&quot;,&quot;title&quot;:&quot;removeRole(role)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;removing a non existing role wont throw&quot;,&quot;fullTitle&quot;:&quot;acl removeRole(role) removing a non existing role wont throw&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;\nexpect(acl.removeRole.bind(acl, role)).to.not.throw()&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f3b34bba-2e7b-407a-813e-7934cb4e9ac2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removing an existing role to be removed&quot;,&quot;fullTitle&quot;:&quot;acl removeRole(role) removing an existing role to be removed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;\nacl.addRole(role)\nexpect(acl.hasRole(role)).to.be.equal(true)\nacl.removeRole(role)\nexpect(acl.hasRole(role)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e193550c-9c7b-4106-9425-a009d7afe565&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f3b34bba-2e7b-407a-813e-7934cb4e9ac2&quot;,&quot;e193550c-9c7b-4106-9425-a009d7afe565&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c3ecc0c8-fcd7-45db-b62d-aeb88bcf1630&quot;,&quot;title&quot;:&quot;hasRoleChild(role, child)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return false if child is not child of role&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleChild(role, child) should return false if child is not child of role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nchild = &#x27;bar&#x27;\nexpect(acl.hasRoleChild(role, child)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRoleChild(role, child)).to.be.equal(false)\nacl.addRole(child)\nexpect(acl.hasRoleChild(role, child)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dfa11129-d871-4877-8253-f8bfa8c94b6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be able to find a child of a role&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleChild(role, child) should be able to find a child of a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nchild = &#x27;bar&#x27;\nacl.addRoleChild(role, child)\nexpect(acl.hasRoleChild(role, child)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;dc131f90-fa14-4125-a337-6115df53c28d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dfa11129-d871-4877-8253-f8bfa8c94b6c&quot;,&quot;dc131f90-fa14-4125-a337-6115df53c28d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;78368b5b-7dfb-49a8-99bf-5bbb060b32d7&quot;,&quot;title&quot;:&quot;hasRoleChildRecursively(role, child)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return false if child does not derive from role&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleChildRecursively(role, child) should return false if child does not derive from role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl           = new Acl,\nrole          = &#x27;foo&#x27;,\nchild         = &#x27;bar&#x27;,\nchildOfChild  = &#x27;baz&#x27;\nexpect(acl.hasRoleChildRecursively(role, childOfChild)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRoleChildRecursively(role, childOfChild)).to.be.equal(false)\nacl.addRole(child)\nexpect(acl.hasRoleChildRecursively(role, childOfChild)).to.be.equal(false)\nacl.addRole(childOfChild)\nexpect(acl.hasRoleChildRecursively(role, childOfChild)).to.be.equal(false)\nacl.addRoleChild(role, child)\nexpect(acl.hasRoleChildRecursively(role, childOfChild)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;92cdad33-364f-41ca-936b-2a160653fca8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true if child derives from role&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleChildRecursively(role, child) should return true if child derives from role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl           = new Acl,\nrole          = &#x27;foo&#x27;,\nchild         = &#x27;bar&#x27;,\nchildOfChild  = &#x27;baz&#x27;\nacl.addRoleChild(role, child)\nacl.addRoleChild(child, childOfChild)\nexpect(acl.hasRoleChildRecursively(role, childOfChild)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b71d982b-e56d-4399-bea6-0773a172ee13&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92cdad33-364f-41ca-936b-2a160653fca8&quot;,&quot;b71d982b-e56d-4399-bea6-0773a172ee13&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1fe55f6a-a7f0-4da2-80d8-2c4f8bc85e20&quot;,&quot;title&quot;:&quot;addRoleChild(role, child)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to add a child to a role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleChild(role, child) should be able to add a child to a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nchild = &#x27;bar&#x27;\nacl.addRoleChild(role, child)\nexpect(acl.hasRole(role)).to.be.equal(true)\nexpect(acl.hasRole(child)).to.be.equal(true)\nexpect(acl.hasRoleChild(role, child)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cf099244-a441-4472-9ce4-f7e504b775b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf099244-a441-4472-9ce4-f7e504b775b5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c82e95dd-31a7-463f-9fbd-38b8b6f4f5ad&quot;,&quot;title&quot;:&quot;removeRoleChild(role, child)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to remove a child from a role&quot;,&quot;fullTitle&quot;:&quot;acl removeRoleChild(role, child) should be able to remove a child from a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nchild = &#x27;bar&#x27;\nacl.addRoleChild(role, child)\nexpect(acl.hasRoleChild(role, child)).to.be.equal(true)\nacl.removeRoleChild(role, child)\nexpect(acl.hasRoleChild(role, child)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6798bb68-f5fa-4966-8389-277e83551bd6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6798bb68-f5fa-4966-8389-277e83551bd6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;53a79bc2-a47f-4abe-8bd1-44ad4eebe10e&quot;,&quot;title&quot;:&quot;hasRoleUser(role, user)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true only if role has user&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleUser(role, user) should return true only if role has user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl  = new Acl,\nrole = &#x27;foo&#x27;,\nuser = &#x27;bar&#x27;\nexpect(acl.hasRoleUser(role, user)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRoleUser(role, user)).to.be.equal(false)\nacl.addRoleUser(role, user)\nexpect(acl.hasRoleUser(role, user)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;fbe451f9-1073-4aaf-993b-ff249f264840&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fbe451f9-1073-4aaf-993b-ff249f264840&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;254f4072-bd14-4456-91cf-aaca0211227c&quot;,&quot;title&quot;:&quot;addRoleUser(role user)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;adding a user to a role also creates the role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleUser(role user) adding a user to a role also creates the role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl  = new Acl,\nrole = &#x27;foo&#x27;,\nuser = &#x27;bar&#x27;\nexpect(acl.hasRole(role)).to.be.equal(false)\nacl.addRoleUser(role, user)\nexpect(acl.hasRole(role)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a11cf2df-7ffd-4e30-8d03-25f1d2f8eb79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should be able to add a user to a role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleUser(role user) should be able to add a user to a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl  = new Acl,\nrole = &#x27;foo&#x27;,\nuser = &#x27;bar&#x27;\nexpect(acl.hasRoleUser(role, user)).to.be.equal(false)\nacl.addRoleUser(role, user)\nexpect(acl.hasRoleUser(role, user)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6619bdc4-7563-4b52-b97a-24101f5985ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a11cf2df-7ffd-4e30-8d03-25f1d2f8eb79&quot;,&quot;6619bdc4-7563-4b52-b97a-24101f5985ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a80e94da-48d3-4890-be2d-0725a743b0bf&quot;,&quot;title&quot;:&quot;removeRoleUser(role, user)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to remove a user from a role&quot;,&quot;fullTitle&quot;:&quot;acl removeRoleUser(role, user) should be able to remove a user from a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl  = new Acl,\nrole = &#x27;foo&#x27;,\nuser = &#x27;bar&#x27;\nexpect(acl.hasRoleUser(role, user)).to.be.equal(false)\nacl.addRoleUser(role, user)\nexpect(acl.hasRoleUser(role, user)).to.be.equal(true)\nacl.removeRoleUser(role, user)\nexpect(acl.hasRoleUser(role, user)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;4037a615-13c8-44fc-87cd-b1769b0fe2af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4037a615-13c8-44fc-87cd-b1769b0fe2af&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bca6a4b6-956a-4681-a7f1-06a41ca5722f&quot;,&quot;title&quot;:&quot;removeUser(user)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to remove a user from all roles&quot;,&quot;fullTitle&quot;:&quot;acl removeUser(user) should be able to remove a user from all roles&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole1 = &#x27;foo&#x27;,\nrole2 = &#x27;bar&#x27;,\nrole3 = &#x27;baz&#x27;,\nuser  = &#x27;qux&#x27;\nacl.addRoleUser(role1, user)\nacl.addRoleUser(role2, user)\nexpect(acl.hasRoleUser(role1, user)).to.be.equal(true)\nexpect(acl.hasRoleUser(role2, user)).to.be.equal(true)\nexpect(acl.hasRoleUser(role3, user)).to.be.equal(false)\nacl.removeUser(user)\nexpect(acl.hasRoleUser(role1, user)).to.be.equal(false)\nexpect(acl.hasRoleUser(role2, user)).to.be.equal(false)\nexpect(acl.hasRoleUser(role3, user)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;2123c17b-5021-42d4-9caa-95bd2ece50c9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2123c17b-5021-42d4-9caa-95bd2ece50c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e477b7e1-be25-4fd8-a9d7-84663997f14e&quot;,&quot;title&quot;:&quot;hasRoleDomainResource(role, domain, resource)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true only if the role has the resource&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleDomainResource(role, domain, resource) should return true only if the role has the resource&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nrole      = &#x27;foo&#x27;,\nresource  = &#x27;bar&#x27;\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, resource)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, resource)).to.be.equal(false)\nacl.addRoleDomainResource(role, &#x27;domain&#x27;, resource)\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, resource)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;819872fc-f70d-482f-8b78-2e53dbb4dfc7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;819872fc-f70d-482f-8b78-2e53dbb4dfc7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6857234f-3db0-4210-af85-280d8e7e5df2&quot;,&quot;title&quot;:&quot;addRoleDomainResource(role, domain, resource)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to add a resource to a role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleDomainResource(role, domain, resource) should be able to add a resource to a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nrole      = &#x27;foo&#x27;,\nresource  = &#x27;bar&#x27;\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, resource)).to.be.equal(false)\nacl.addRoleDomainResource(role, &#x27;domain&#x27;, resource)\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, resource)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;7f996e77-f002-4952-80bc-3d24f1e9e779&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7f996e77-f002-4952-80bc-3d24f1e9e779&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;54bb9f66-582d-4b1c-8e2c-124663571801&quot;,&quot;title&quot;:&quot;removeRoleDomainResource(role, domain, resource)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to remove a resource from a role&quot;,&quot;fullTitle&quot;:&quot;acl removeRoleDomainResource(role, domain, resource) should be able to remove a resource from a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nrole      = &#x27;foo&#x27;,\ndomain    = &#x27;domain&#x27;,\nresource  = &#x27;bar&#x27;\nexpect(acl.hasRoleDomainResource(role, domain, resource)).to.be.equal(false)\nacl.addRoleDomainResource(role, domain, resource)\nexpect(acl.hasRoleDomainResource(role, domain, resource)).to.be.equal(true)\nacl.removeRoleDomainResource(role, domain, resource)\nexpect(acl.hasRoleDomainResource(role, domain, resource)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;cfa50aef-ff73-444b-8600-ae19e0165b69&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removing a resource from a role should not remove the role&quot;,&quot;fullTitle&quot;:&quot;acl removeRoleDomainResource(role, domain, resource) removing a resource from a role should not remove the role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nrole      = &#x27;foo&#x27;,\nresource  = &#x27;bar&#x27;\nacl.addRoleDomainResource(role, &#x27;domain&#x27;, resource)\nacl.removeRoleDomainResource(role, &#x27;domain&#x27;, resource)\nexpect(acl.hasRole(role)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;a2b92ed8-e715-4e95-b0c7-4ea4d7166bd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cfa50aef-ff73-444b-8600-ae19e0165b69&quot;,&quot;a2b92ed8-e715-4e95-b0c7-4ea4d7166bd7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2f7ea5c2-0b05-4977-9c52-6b9ef8d69253&quot;,&quot;title&quot;:&quot;removeDomainResource(domain, resource)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to remove a resource from all roles&quot;,&quot;fullTitle&quot;:&quot;acl removeDomainResource(domain, resource) should be able to remove a resource from all roles&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nrole1     = &#x27;foo&#x27;,\nrole2     = &#x27;bar&#x27;,\nrole3     = &#x27;baz&#x27;,\nresource  = &#x27;qux&#x27;\nacl.addRole(role1)\nacl.addRoleDomainResource(role2, &#x27;domain&#x27;, resource)\nacl.addRoleDomainResource(role3, &#x27;domain&#x27;, resource)\nexpect(acl.hasRoleDomainResource(role1, &#x27;domain&#x27;, resource)).to.be.equal(false)\nexpect(acl.hasRoleDomainResource(role2, &#x27;domain&#x27;, resource)).to.be.equal(true)\nexpect(acl.hasRoleDomainResource(role3, &#x27;domain&#x27;, resource)).to.be.equal(true)\nacl.removeDomainResource(&#x27;domain&#x27;, resource)\nexpect(acl.hasRoleDomainResource(role1, &#x27;domain&#x27;, resource)).to.be.equal(false)\nexpect(acl.hasRoleDomainResource(role2, &#x27;domain&#x27;, resource)).to.be.equal(false)\nexpect(acl.hasRoleDomainResource(role3, &#x27;domain&#x27;, resource)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e3b15372-3226-41a7-96ea-0b07e5d2eb57&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e3b15372-3226-41a7-96ea-0b07e5d2eb57&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;384522f8-44e0-42c8-8d94-65a69625eaf2&quot;,&quot;title&quot;:&quot;hasRoleDomainResourcePermission(role, domain, resource, permission)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true only if the role has the permission&quot;,&quot;fullTitle&quot;:&quot;acl hasRoleDomainResourcePermission(role, domain, resource, permission) should return true only if the role has the permission&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nacl.addRole(role)\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nacl.addRoleDomainResource(role, &#x27;domain&#x27;, res)\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nacl.addRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f921374b-9902-41d9-9e96-8e9f8052970b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f921374b-9902-41d9-9e96-8e9f8052970b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;86d53e11-8533-41dd-b0b6-8d36526d344c&quot;,&quot;title&quot;:&quot;addRoleDomainResourcePermission(role, domain, resource, permission)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should be able to add a permission to a role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleDomainResourcePermission(role, domain, resource, permission) should be able to add a permission to a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nacl.addRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;ebb43dee-6922-4df4-8c05-6f8ec987883a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should add a resource to the role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleDomainResourcePermission(role, domain, resource, permission) should add a resource to the role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, res)).to.be.equal(false)\nacl.addRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResource(role, &#x27;domain&#x27;, res)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;402c5739-bea5-496f-83e8-6ad8844012cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should add a role&quot;,&quot;fullTitle&quot;:&quot;acl addRoleDomainResourcePermission(role, domain, resource, permission) should add a role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nexpect(acl.hasRole(role)).to.be.equal(false)\nacl.addRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRole(role)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;97aac59f-d15e-4548-b59a-e772a6f00109&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ebb43dee-6922-4df4-8c05-6f8ec987883a&quot;,&quot;402c5739-bea5-496f-83e8-6ad8844012cb&quot;,&quot;97aac59f-d15e-4548-b59a-e772a6f00109&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c6e393e1-d9d4-4abc-89bd-3be795c34b97&quot;,&quot;title&quot;:&quot;removeRoleDomainResourcePermission(role, domain, resource, permission)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove a permission from a role resource&quot;,&quot;fullTitle&quot;:&quot;acl removeRoleDomainResourcePermission(role, domain, resource, permission) should remove a permission from a role resource&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole  = &#x27;foo&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nacl.addRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(true)\nacl.removeRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResourcePermission(role, &#x27;domain&#x27;, res, per)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;810e949c-7ae3-4a3a-80ab-6ec6e0a856cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;810e949c-7ae3-4a3a-80ab-6ec6e0a856cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;054b4bba-d6d8-46b0-b85c-3a7acf8244bc&quot;,&quot;title&quot;:&quot;removeDomainResourcePermission(domain, resource, permission)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should remove a permission from a resource on all roles&quot;,&quot;fullTitle&quot;:&quot;acl removeDomainResourcePermission(domain, resource, permission) should remove a permission from a resource on all roles&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole1 = &#x27;foo1&#x27;,\nrole2 = &#x27;foo2&#x27;,\nrole3 = &#x27;foo3&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nacl.addRoleDomainResource(role1, &#x27;domain&#x27;, res)\nacl.addRoleDomainResourcePermission(role2, &#x27;domain&#x27;, res, per)\nacl.addRoleDomainResourcePermission(role3, &#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResourcePermission(role1, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nexpect(acl.hasRoleDomainResourcePermission(role2, &#x27;domain&#x27;, res, per)).to.be.equal(true)\nexpect(acl.hasRoleDomainResourcePermission(role3, &#x27;domain&#x27;, res, per)).to.be.equal(true)\nacl.removeDomainResourcePermission(&#x27;domain&#x27;, res, per)\nexpect(acl.hasRoleDomainResourcePermission(role1, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nexpect(acl.hasRoleDomainResourcePermission(role2, &#x27;domain&#x27;, res, per)).to.be.equal(false)\nexpect(acl.hasRoleDomainResourcePermission(role3, &#x27;domain&#x27;, res, per)).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b4024104-3651-433a-8ad9-ed214619d08f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not remove the role and resouce&quot;,&quot;fullTitle&quot;:&quot;acl removeDomainResourcePermission(domain, resource, permission) should not remove the role and resouce&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nrole1 = &#x27;foo1&#x27;,\nrole2 = &#x27;foo2&#x27;,\nrole3 = &#x27;foo3&#x27;,\nres   = &#x27;bar&#x27;,\nper   = &#x27;baz&#x27;\nacl.addRoleDomainResource(role1, &#x27;domain&#x27;, res)\nacl.addRoleDomainResourcePermission(role2, &#x27;domain&#x27;, res, per)\nacl.addRoleDomainResourcePermission(role3, &#x27;domain&#x27;, res, per)\nacl.removeDomainResourcePermission(res, &#x27;domain&#x27;, per)\nexpect(acl.hasRoleDomainResource(role1, &#x27;domain&#x27;, res, per)).to.be.equal(true)\nexpect(acl.hasRoleDomainResource(role2, &#x27;domain&#x27;, res, per)).to.be.equal(true)\nexpect(acl.hasRoleDomainResource(role3, &#x27;domain&#x27;, res, per)).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;823f1efa-62bc-44aa-b423-da1f9daeeca7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b4024104-3651-433a-8ad9-ed214619d08f&quot;,&quot;823f1efa-62bc-44aa-b423-da1f9daeeca7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c28c44aa-84d7-498a-8ed7-840e3f416010&quot;,&quot;title&quot;:&quot;getUserRoles(user)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of all the roles a user have&quot;,&quot;fullTitle&quot;:&quot;acl getUserRoles(user) should return a list of all the roles a user have&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl   = new Acl,\nuser  = &#x27;foobar&#x27;,\nrole1 = &#x27;foo&#x27;,\nrole2 = &#x27;bar&#x27;,\nrole3 = &#x27;baz&#x27;,\nrole4 = &#x27;qux&#x27;\nacl.addRoleUser(role1, user)\nacl.addRoleUser(role2, user)\nacl.addRoleChild(role1, role3)\nacl.addRoleChild(role2, role4)\nexpect(acl.getUserRoles(user)).to.have.members([role1, role2])&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f91a30aa-f1bf-44c1-91a6-026372a287ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f91a30aa-f1bf-44c1-91a6-026372a287ec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9821959d-0ef6-4ba8-ad74-5b5e9c099ac0&quot;,&quot;title&quot;:&quot;getUserRolesRecursive(user)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of roles and the derieved roles a user have&quot;,&quot;fullTitle&quot;:&quot;acl getUserRolesRecursive(user) should return a list of roles and the derieved roles a user have&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nuser1     = &#x27;foobar1&#x27;,\nuser2     = &#x27;foobar2&#x27;,\nrole1     = &#x27;foo&#x27;,\nrole2     = &#x27;bar&#x27;,\nrole3     = &#x27;baz&#x27;,\nrole4     = &#x27;qux&#x27;,\nexpected  = [role1, role2, role3]\nacl.addRoleUser(role1, user1)\nacl.addRoleUser(role2, user1)\nacl.addRoleChild(role1, role3)\nacl.addRole(role4)\nexpect(acl.getUserRolesRecursively(user1)).to.have.members(expected)\nacl.addRoleUser(role4, user2)\nexpect(acl.getUserRolesRecursively(user1)).to.have.members(expected)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f5f3f307-a4ed-4c5a-96d3-8ddce06f8224&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5f3f307-a4ed-4c5a-96d3-8ddce06f8224&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f39cdc07-6e70-45f4-b515-2058d550259d&quot;,&quot;title&quot;:&quot;getRolesRecursively(role)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of roles derieved of the root role&quot;,&quot;fullTitle&quot;:&quot;acl getRolesRecursively(role) should return a list of roles derieved of the root role&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl       = new Acl,\nrole1     = &#x27;foo&#x27;,\nrole2     = &#x27;bar&#x27;,\nrole3     = &#x27;baz&#x27;,\nrole4     = &#x27;qux&#x27;,\nexpected  = [role1, role3]\nacl.addRole(role1)\nacl.addRole(role2)\nacl.addRoleChild(role1, role3)\nexpect(acl.getRolesRecursively(role1)).to.have.members(expected)\nacl.addRole(role4)\nexpect(acl.getRolesRecursively(role1)).to.have.members(expected)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e5a859e7-7a22-4250-a0d8-46d8433523d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e5a859e7-7a22-4250-a0d8-46d8433523d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f421fb1e-7e17-49cb-9649-4494389a8fda&quot;,&quot;title&quot;:&quot;isUserAuthorized(user, domain, resource, permission)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should only allow a valid permission&quot;,&quot;fullTitle&quot;:&quot;acl isUserAuthorized(user, domain, resource, permission) should only allow a valid permission&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nuser        = &#x27;foo&#x27;,\nrole        = &#x27;bar&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource    = &#x27;baz&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRoleUser(role, user)\nacl.addRoleDomainResourcePermission(role, domain, resource, permission)\nconst result = acl.isUserAuthorized(user, domain, resource, permission)\nexpect(result).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;6ba189c8-b214-4d57-8660-68f54ab163f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow a valid permission through a role hierarchy&quot;,&quot;fullTitle&quot;:&quot;acl isUserAuthorized(user, domain, resource, permission) should allow a valid permission through a role hierarchy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nuser1       = &#x27;foo1&#x27;,\nuser2       = &#x27;foo2&#x27;,\nrole1       = &#x27;bar1&#x27;,\nrole2       = &#x27;bar2&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRoleUser(role1, user1)\nacl.addRoleUser(role2, user2)\nacl.addRoleDomainResourcePermission(role1, domain, resource1, permission)\nacl.addRoleDomainResourcePermission(role2, domain, resource2, permission)\nconst result1 = acl.isUserAuthorized(user1, domain, resource2, permission)\nexpect(result1).to.be.equal(false)\nacl.addRoleChild(role1, role2)\nconst result2 = acl.isUserAuthorized(user1, domain, resource2, permission)\nexpect(result2).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;512d571c-e97a-4248-9e92-dd75c041d2cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow an invalid permission&quot;,&quot;fullTitle&quot;:&quot;acl isUserAuthorized(user, domain, resource, permission) should not allow an invalid permission&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nuser1       = &#x27;foo1&#x27;,\nuser2       = &#x27;foo2&#x27;,\nrole1       = &#x27;bar1&#x27;,\nrole2       = &#x27;bar2&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRoleUser(role1, user1)\nacl.addRoleUser(role2, user2)\nacl.addRoleDomainResourcePermission(role1, domain, resource1, permission)\nacl.addRoleDomainResourcePermission(role2, domain, resource2, permission)\nconst result1 = acl.isUserAuthorized(user1, domain, resource1, permission)\nexpect(result1).to.be.equal(true)\nconst result2 = acl.isUserAuthorized(user1, domain, resource2, permission)\nexpect(result2).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e290de04-6d7e-4c5a-b1f9-932f702eb846&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6ba189c8-b214-4d57-8660-68f54ab163f9&quot;,&quot;512d571c-e97a-4248-9e92-dd75c041d2cb&quot;,&quot;e290de04-6d7e-4c5a-b1f9-932f702eb846&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2a371c33-54f6-4d29-a6f0-bc0b5c36d52b&quot;,&quot;title&quot;:&quot;isRoleAuthorized(role, domain, resource, permission)&quot;,&quot;fullFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/index.test.js&quot;,&quot;file&quot;:&quot;/index.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should only allow a valid permission&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) should only allow a valid permission&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole        = &#x27;bar&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource    = &#x27;baz&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRole(role)\nacl.addRoleDomainResourcePermission(role, domain, resource, permission)\nconst result = acl.isRoleAuthorized(role, domain, resource, permission)\nexpect(result).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;b715c6cd-60af-498d-a2a6-b78a7aa4d98e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should allow a valid permission through a role hierarchy&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) should allow a valid permission through a role hierarchy&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole1       = &#x27;bar1&#x27;,\nrole2       = &#x27;bar2&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRole(role1)\nacl.addRole(role2)\nacl.addRoleDomainResourcePermission(role1, domain, resource1, permission)\nacl.addRoleDomainResourcePermission(role2, domain, resource2, permission)\nconst result1 = acl.isRoleAuthorized(role1, domain, resource2, permission)\nexpect(result1).to.be.equal(false)\nacl.addRoleChild(role1, role2)\nconst result2 = acl.isRoleAuthorized(role1, domain, resource2, permission)\nexpect(result2).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;e4e6be8e-b930-423f-be2e-c3ed91cc0dc8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not allow an invalid permission&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) should not allow an invalid permission&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole1       = &#x27;bar1&#x27;,\nrole2       = &#x27;bar2&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRole(role1)\nacl.addRole(role2)\nacl.addRoleDomainResourcePermission(role1, domain, resource1, permission)\nacl.addRoleDomainResourcePermission(role2, domain, resource2, permission)\nconst result1 = acl.isRoleAuthorized(role1, domain, resource1, permission)\nexpect(result1).to.be.equal(true)\nconst result2 = acl.isRoleAuthorized(role1, domain, resource2, permission)\nexpect(result2).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;84601498-e6ce-40e4-a44d-2494a49d58e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;* for resouce should allow access to all resources&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) * for resouce should allow access to all resources&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole1       = &#x27;bar1&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission  = &#x27;qux&#x27;\nacl.addRole(role1)\nacl.addRoleDomainResourcePermission(role1, domain, &#x27;*&#x27;, permission)\nconst result1 = acl.isRoleAuthorized(role1, domain, resource1, permission)\nexpect(result1).to.be.equal(true)\nconst result2 = acl.isRoleAuthorized(role1, domain, resource2, permission)\nexpect(result2).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;468a7280-7c42-4077-895f-a3eec3da47b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;* for permission should allow access to all permissions&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) * for permission should allow access to all permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole1       = &#x27;bar1&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\npermission1 = &#x27;qux1&#x27;,\npermission2 = &#x27;qux2&#x27;\nacl.addRole(role1)\nacl.addRoleDomainResourcePermission(role1, domain, resource1, &#x27;*&#x27;)\nconst result1 = acl.isRoleAuthorized(role1, domain, resource1, permission1)\nexpect(result1).to.be.equal(true)\nconst result2 = acl.isRoleAuthorized(role1, domain, resource1, permission2)\nexpect(result2).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;d79e9bad-7699-45cf-8e97-4b526eddb5d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;* for permission and resource should allow access to everything&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) * for permission and resource should allow access to everything&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole1       = &#x27;bar1&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission1 = &#x27;qux1&#x27;,\npermission2 = &#x27;qux2&#x27;\nacl.addRole(role1)\nacl.addRoleDomainResourcePermission(role1, domain, &#x27;*&#x27;, &#x27;*&#x27;)\nconst result1 = acl.isRoleAuthorized(role1, domain, resource1, permission1)\nexpect(result1).to.be.equal(true)\nconst result2 = acl.isRoleAuthorized(role1, domain, resource2, permission2)\nexpect(result2).to.be.equal(true)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;f797ea54-75f5-4382-92f1-b8b9c0de7836&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;undefined permission should allow access on a resource level&quot;,&quot;fullTitle&quot;:&quot;acl isRoleAuthorized(role, domain, resource, permission) undefined permission should allow access on a resource level&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const\nacl         = new Acl,\nrole1       = &#x27;bar1&#x27;,\nrole2       = &#x27;bar2&#x27;,\ndomain      = &#x27;domain&#x27;,\nresource1   = &#x27;baz1&#x27;,\nresource2   = &#x27;baz2&#x27;,\npermission1 = &#x27;qux1&#x27;,\npermission2 = &#x27;qux2&#x27;\nacl.addRole(role1)\nacl.addRole(role2)\nacl.addRoleDomainResourcePermission(role1, domain, resource1, permission1)\nacl.addRoleDomainResourcePermission(role2, domain, resource2, permission2)\nconst result1 = acl.isRoleAuthorized(role1, domain, resource1)\nexpect(result1).to.be.equal(true)\nconst result2 = acl.isRoleAuthorized(role1, domain, resource2)\nexpect(result2).to.be.equal(false)&quot;,&quot;err&quot;:{},&quot;isRoot&quot;:false,&quot;uuid&quot;:&quot;3d0acfb9-7208-4ebb-ba45-114a4ff579d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b715c6cd-60af-498d-a2a6-b78a7aa4d98e&quot;,&quot;e4e6be8e-b930-423f-be2e-c3ed91cc0dc8&quot;,&quot;84601498-e6ce-40e4-a44d-2494a49d58e1&quot;,&quot;468a7280-7c42-4077-895f-a3eec3da47b1&quot;,&quot;d79e9bad-7699-45cf-8e97-4b526eddb5d3&quot;,&quot;f797ea54-75f5-4382-92f1-b8b9c0de7836&quot;,&quot;3d0acfb9-7208-4ebb-ba45-114a4ff579d6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},&quot;copyrightYear&quot;:2018}" data-config="{&quot;reportFilename&quot;:&quot;index&quot;,&quot;reportDir&quot;:&quot;docs/tests&quot;,&quot;reportTitle&quot;:&quot;js.acl&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:true,&quot;enableCharts&quot;:true,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;always&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;docs/tests/assets&quot;,&quot;jsonFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/docs/tests/index.json&quot;,&quot;htmlFile&quot;:&quot;/home/erik/Projects/@superhero/js.acl/docs/tests/index.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>